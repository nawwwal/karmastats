<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistical References - KARMASTAT</title>
    <style>
        /* Sophisticated Color System */
        :root {
            --primary: #0F766E;
            --primary-light: #14B8A6;
            --primary-dark: #115E59;
            --primary-subtle: #CCFBF1;
            --accent: #D97706;
            --accent-light: #FBBF24;
            --success: #059669;
            --info: #0284C7;

            /* Light Theme */
            --bg-body: #F8FAFC;
            --bg-elevated: #FFFFFF;
            --bg-subtle: #F1F5F9;
            --bg-muted: #E2E8F0;
            --text-primary: #0F172A;
            --text-secondary: #475569;
            --text-muted: #64748B;
            --text-inverse: #FFFFFF;
            --border: #E2E8F0;
            --border-subtle: #F1F5F9;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);

            --gradient-hero: linear-gradient(135deg, #0F766E 0%, #115E59 50%, #134E4A 100%);

            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;

            --font-sans: 'Segoe UI', system-ui, -apple-system, sans-serif;
            --font-mono: 'Cascadia Code', 'Fira Code', monospace;
            --transition: 250ms ease;
        }

        [data-theme="dark"] {
            --bg-body: #0F172A;
            --bg-elevated: #1E293B;
            --bg-subtle: #334155;
            --bg-muted: #475569;
            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --text-muted: #94A3B8;
            --border: #334155;
            --border-subtle: #1E293B;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
        }

        /* ============================================
           KARMASTAT LOADER SYSTEM
           ============================================ */

        /* Page Loader Overlay */
        .karma-page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-body), var(--bg-elevated));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .karma-page-loader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-content {
            text-align: center;
        }

        /* Karma Infinity Animation */
        .karma-infinity {
            width: 120px;
            height: 60px;
            margin: 0 auto 1rem;
        }

        .karma-infinity svg {
            width: 100%;
            height: 100%;
        }

        .karma-path {
            fill: none;
            stroke: url(#loaderGrad);
            stroke-width: 4;
            stroke-linecap: round;
            stroke-dasharray: 200;
            stroke-dashoffset: 0;
            animation: karmaFlow 2s ease-in-out infinite;
        }

        .karma-point {
            animation: karmaPulse 1s ease-in-out infinite;
        }

        .karma-point:nth-child(2) {
            animation-delay: 0.2s;
        }

        .karma-point:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes karmaFlow {
            0%, 100% {
                stroke-dashoffset: 0;
            }
            50% {
                stroke-dashoffset: 200;
            }
        }

        @keyframes karmaPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.3);
                opacity: 0.7;
            }
        }

        .loader-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
        }

        /* Button Loading State */
        .btn.loading {
            position: relative;
            pointer-events: none;
        }

        .btn.loading .btn-text {
            opacity: 0;
        }

        .btn.loading .karma-spinner {
            display: block;
        }

        .karma-spinner {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
        }

        .karma-spinner svg {
            width: 100%;
            height: 100%;
            animation: spinnerRotate 1s linear infinite;
        }

        .karma-spinner circle {
            fill: none;
            stroke: currentColor;
            stroke-width: 3;
            stroke-linecap: round;
            stroke-dasharray: 60;
            stroke-dashoffset: 20;
            animation: spinnerDash 1.5s ease-in-out infinite;
        }

        @keyframes spinnerRotate {
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes spinnerDash {
            0% {
                stroke-dashoffset: 60;
            }
            50% {
                stroke-dashoffset: 15;
            }
            100% {
                stroke-dashoffset: 60;
            }
        }

        /* Results Loading State */
        .results-loading {
            position: relative;
            min-height: 200px;
        }

        .results-loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-elevated);
            opacity: 0.8;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ============================================
           END KARMASTAT LOADER SYSTEM
           ============================================ */

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: background var(--transition), color var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Header */
        .header {
            background: var(--gradient-hero);
            border-radius: var(--radius-xl);
            padding: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at 30% 0%, rgba(255,255,255,0.1) 0%, transparent 50%);
            border-radius: var(--radius-xl);
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.375rem;
        }

        .header p {
            font-size: 0.9375rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            text-decoration: none;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }

        /* Search Section */
        .search-section {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
        }

        .search-wrapper {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-input-wrapper {
            flex: 1;
            min-width: 280px;
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1rem;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-family: var(--font-sans);
            font-size: 0.9375rem;
            background: var(--bg-subtle);
            color: var(--text-primary);
            transition: all var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg-elevated);
            box-shadow: 0 0 0 3px var(--primary-subtle);
        }

        [data-theme="dark"] .search-input:focus {
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.2);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .filter-btns {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-secondary);
            border-radius: 999px;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .search-hint {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
            text-align: center;
        }

        .search-status {
            background: var(--bg-subtle);
            padding: 0.75rem 1rem;
            border-radius: var(--radius);
            margin-top: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .search-status strong {
            color: var(--text-primary);
        }

        .clear-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: background var(--transition);
        }

        .clear-btn:hover {
            background: var(--primary-dark);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .tab {
            padding: 0.625rem 1.25rem;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-secondary);
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab:hover {
            border-color: var(--primary-light);
            color: var(--text-primary);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .tab-badge {
            background: var(--success);
            color: white;
            font-size: 0.6875rem;
            padding: 0.125rem 0.5rem;
            border-radius: 999px;
            font-weight: 600;
        }

        /* Content Cards */
        .content-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
        }

        .content-card.hidden {
            display: none;
        }

        .content-card h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-card > p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1.25rem;
        }

        /* Reference Items */
        .ref-grid {
            display: grid;
            gap: 1rem;
        }

        .ref-item {
            background: var(--bg-subtle);
            padding: 1.25rem;
            border-radius: var(--radius);
            border-left: 3px solid var(--primary);
            transition: all var(--transition);
        }

        .ref-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow);
        }

        .ref-category {
            display: inline-block;
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.25rem 0.625rem;
            background: var(--primary);
            color: white;
            border-radius: 999px;
            margin-bottom: 0.625rem;
        }

        .ref-title {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.375rem;
            line-height: 1.4;
        }

        .ref-authors {
            font-size: 0.8125rem;
            color: var(--primary);
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .ref-source {
            font-size: 0.8125rem;
            font-style: italic;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .ref-desc {
            font-size: 0.8125rem;
            color: var(--text-muted);
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .ref-links {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .ref-link {
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            text-decoration: none;
            transition: all var(--transition);
        }

        .ref-link.primary {
            background: var(--primary);
            color: white;
        }

        .ref-link.primary:hover {
            background: var(--primary-dark);
        }

        .ref-link.secondary {
            background: var(--bg-elevated);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .ref-link.secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Formula Sections */
        .formula-section {
            background: var(--bg-subtle);
            padding: 1.25rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
        }

        .formula-section h3 {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
        }

        .formula-box {
            background: var(--bg-elevated);
            padding: 1rem;
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: var(--text-primary);
            border: 1px solid var(--border);
            overflow-x: auto;
            margin-bottom: 0.75rem;
            line-height: 1.8;
        }

        .formula-desc {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .formula-ref {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .formula-ref strong {
            color: var(--text-secondary);
        }

        /* Glossary */
        .alphabet-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            justify-content: center;
            margin-bottom: 1.25rem;
        }

        .alphabet-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-subtle);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition);
        }

        .alphabet-btn:hover:not(:disabled),
        .alphabet-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .alphabet-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .glossary-item {
            background: var(--bg-subtle);
            padding: 1rem;
            border-radius: var(--radius);
        }

        .glossary-term {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.375rem;
        }

        .glossary-def {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Resources */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .resource-card {
            background: var(--bg-subtle);
            padding: 1.25rem;
            border-radius: var(--radius);
            transition: all var(--transition);
        }

        .resource-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .resource-card h4 {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .resource-card p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .resource-card a {
            font-size: 0.8125rem;
            color: var(--info);
            text-decoration: none;
        }

        .resource-card a:hover {
            text-decoration: underline;
        }

        .resources-section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 1.5rem 0 1rem;
        }

        .resources-section-title:first-of-type {
            margin-top: 0;
        }

        /* Footer */
        .footer {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            text-align: center;
            margin-top: 1.5rem;
        }

        .footer-brand {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .footer-logo {
            width: 28px;
            height: 28px;
            background: var(--primary);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
        }

        .footer-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .footer-blessing {
            font-size: 0.9375rem;
            color: var(--accent);
            font-weight: 500;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            color: var(--text-primary);
            font-size: 1.25rem;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header {
                padding: 1.5rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .tabs {
                justify-content: center;
            }

            .glossary-grid,
            .resources-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- KARMASTAT Page Loader -->
    <div class="karma-page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="karma-infinity">
                <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="loaderGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#0F766E"/>
                            <stop offset="50%" style="stop-color:#14B8A6"/>
                            <stop offset="100%" style="stop-color:#0F766E"/>
                        </linearGradient>
                    </defs>
                    <path class="karma-path" d="M20 30 C20 12, 40 12, 60 30 C80 48, 100 48, 100 30 C100 12, 80 12, 60 30 C40 48, 20 48, 20 30" />
                    <circle class="karma-point" cx="20" cy="30" r="5" fill="#FCD34D"/>
                    <circle class="karma-point" cx="60" cy="30" r="6" fill="white"/>
                    <circle class="karma-point" cx="100" cy="30" r="5" fill="#FCD34D"/>
                </svg>
            </div>
            <div class="loader-text">KARMASTAT</div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="brand" style="display: flex; align-items: center; justify-content: center; gap: 0.75rem; margin-top: 1rem;">
                    <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 20 C6 11, 13 11, 20 20 C27 29, 34 29, 34 20 C34 11, 27 11, 20 20 C13 29, 6 29, 6 20"
                              fill="none" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <circle cx="6" cy="20" r="2.5" fill="#FCD34D"/>
                        <circle cx="20" cy="20" r="3" fill="white"/>
                        <circle cx="34" cy="20" r="2.5" fill="#FCD34D"/>
                    </svg>
                    <span style="font-weight: 600; letter-spacing: 1px;">KARMASTAT</span>
                </div>
                <h1>Statistical References Library</h1>
                <p>Comprehensive Reference Database for Sample Size Calculations</p>
                <nav class="nav-links">
                    <a href="karmastat_2_0_main.html" class="nav-link">&#8592; Back to Main</a>
                    <a href="karmastat_report_generator.html" class="nav-link">Report Generator</a>
                    <a href="karmastat_checklists.html" class="nav-link">Checklists</a>
                </nav>
            </div>
        </header>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-wrapper">
                <div class="search-input-wrapper">
                    <span class="search-icon">&#128269;</span>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search references, formulas, glossary terms...">
                </div>
                <div class="filter-btns">
                    <button class="filter-btn active" data-category="all">All</button>
                    <button class="filter-btn" data-category="textbook">Textbooks</button>
                    <button class="filter-btn" data-category="article">Articles</button>
                    <button class="filter-btn" data-category="software">Software</button>
                </div>
            </div>
            <p class="search-hint">Try: "Cohen", "power", "kappa", "ICC", "meta-analysis", "cluster"</p>
            <div class="search-status hidden" id="searchStatus"></div>
        </section>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="textbooks">Key Textbooks</button>
            <button class="tab" data-tab="formulas">Formula References</button>
            <button class="tab" data-tab="papers">Methodology Papers</button>
            <button class="tab" data-tab="resources">Online Resources</button>
            <button class="tab" data-tab="glossary">Glossary</button>
        </div>

        <!-- Textbooks -->
        <div class="content-card" id="textbooks-content">
            <h2>&#128218; Key Textbooks</h2>
            <p>Essential reference books for sample size calculation and statistical methodology.</p>

            <div class="ref-grid">
                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Primary Reference</span>
                    <div class="ref-title">Sample Sizes for Clinical, Laboratory and Epidemiology Studies</div>
                    <div class="ref-authors">Machin D, Campbell MJ, Tan SB, Tan SH</div>
                    <div class="ref-source">4th Edition, Wiley-Blackwell, 2018</div>
                    <div class="ref-desc">Comprehensive guide covering sample size calculations for clinical trials, epidemiological studies, and laboratory experiments.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1002/9781118874905" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://www.wiley.com" target="_blank" class="ref-link secondary">Publisher</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Primary Reference</span>
                    <div class="ref-title">Sample Size Calculations in Clinical Research</div>
                    <div class="ref-authors">Chow SC, Shao J, Wang H, Lokhnygina Y</div>
                    <div class="ref-source">3rd Edition, Chapman and Hall/CRC, 2017</div>
                    <div class="ref-desc">Authoritative text on sample size calculation for various clinical trial designs including parallel, crossover, and adaptive designs.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1201/9781315183084" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Meta-Analysis</span>
                    <div class="ref-title">Introduction to Meta-Analysis</div>
                    <div class="ref-authors">Borenstein M, Hedges LV, Higgins JPT, Rothstein HR</div>
                    <div class="ref-source">2nd Edition, Wiley, 2021</div>
                    <div class="ref-desc">Definitive guide to meta-analysis covering effect sizes, fixed and random effects models, heterogeneity, and power analysis.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1002/9781119558378" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://www.meta-analysis.com/" target="_blank" class="ref-link secondary">Website</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Proportions</span>
                    <div class="ref-title">Statistical Methods for Rates and Proportions</div>
                    <div class="ref-authors">Fleiss JL, Levin B, Paik MC</div>
                    <div class="ref-source">3rd Edition, Wiley, 2003</div>
                    <div class="ref-desc">Classic text covering statistical methods for categorical data including sample size for proportions and kappa statistics.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1002/0471445428" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Effect Sizes</span>
                    <div class="ref-title">Statistical Power Analysis for the Behavioral Sciences</div>
                    <div class="ref-authors">Cohen J</div>
                    <div class="ref-source">2nd Edition, Lawrence Erlbaum Associates, 1988</div>
                    <div class="ref-desc">Foundational text introducing Cohen's d, effect size conventions (small, medium, large), and power analysis methodology.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.4324/9780203771587" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Cluster Trials</span>
                    <div class="ref-title">Cluster Randomised Trials</div>
                    <div class="ref-authors">Hayes RJ, Moulton LH</div>
                    <div class="ref-source">2nd Edition, Chapman and Hall/CRC, 2017</div>
                    <div class="ref-desc">Comprehensive guide to design, analysis, and sample size calculation for cluster randomized trials.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1201/9781584888178" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Bayesian</span>
                    <div class="ref-title">Bayesian Adaptive Methods for Clinical Trials</div>
                    <div class="ref-authors">Berry SM, Carlin BP, Lee JJ, Muller P</div>
                    <div class="ref-source">Chapman and Hall/CRC, 2010</div>
                    <div class="ref-desc">Introduction to Bayesian approaches in clinical trials including adaptive designs and sample size determination.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1201/EBK1439825488" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>

                <div class="ref-item" data-category="textbook">
                    <span class="ref-category">Diagnostic Studies</span>
                    <div class="ref-title">The Evidence Base of Clinical Diagnosis</div>
                    <div class="ref-authors">Knottnerus JA, Buntinx F</div>
                    <div class="ref-source">2nd Edition, BMJ Books, 2008</div>
                    <div class="ref-desc">Comprehensive text on diagnostic test evaluation including sample size for sensitivity, specificity, and ROC analysis.</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1002/9780470750025" target="_blank" class="ref-link primary">DOI</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulas -->
        <div class="content-card hidden" id="formulas-content">
            <h2>&#128290; Formula References</h2>
            <p>Key formulas used in KARMASTAT calculators with citations.</p>

            <div class="formula-section">
                <h3>Two-Sample T-Test Sample Size</h3>
                <div class="formula-box">n = 2 &#215; ((z<sub>1-&#945;/2</sub> + z<sub>1-&#946;</sub>)&#178; &#215; &#963;&#178;) / &#948;&#178;</div>
                <div class="formula-desc">Where: n = sample size per group, z = critical values, &#963; = standard deviation, &#948; = minimum detectable difference</div>
                <div class="formula-ref"><strong>Reference:</strong> Machin D, Campbell MJ, et al. (2018). Sample Sizes for Clinical Studies. Chapter 3.</div>
            </div>

            <div class="formula-section">
                <h3>Two-Sample Proportion (Chi-Square)</h3>
                <div class="formula-box">n = [(z<sub>&#945;</sub>&#8730;(2p&#772;q&#772;) + z<sub>&#946;</sub>&#8730;(p<sub>1</sub>q<sub>1</sub> + p<sub>2</sub>q<sub>2</sub>))/(p<sub>1</sub> - p<sub>2</sub>)]&#178;</div>
                <div class="formula-desc">Where: p&#772; = (p<sub>1</sub> + p<sub>2</sub>)/2, q&#772; = 1 - p&#772;</div>
                <div class="formula-ref"><strong>Reference:</strong> Fleiss JL, Levin B, Paik MC. (2003). Statistical Methods for Rates and Proportions. Chapter 4.</div>
            </div>

            <div class="formula-section">
                <h3>Power Analysis (Two-Sample T-Test)</h3>
                <div class="formula-box">Power = &#934;(|&#948;|&#8730;(n/2) - z<sub>1-&#945;/2</sub>) + &#934;(-|&#948;|&#8730;(n/2) - z<sub>1-&#945;/2</sub>)</div>
                <div class="formula-desc">Where: &#934; = standard normal CDF, &#948; = standardized effect size</div>
                <div class="formula-ref"><strong>Reference:</strong> Cohen J. (1988). Statistical Power Analysis for the Behavioral Sciences. Chapter 2.</div>
            </div>

            <div class="formula-section">
                <h3>Effect Size Conversions</h3>
                <div class="formula-box">Cohen's d = (M<sub>1</sub> - M<sub>2</sub>) / SD<sub>pooled</sub><br><br>Hedges' g = d &#215; (1 - 3/(4(n<sub>1</sub>+n<sub>2</sub>)-9))<br><br>OR to d: d = ln(OR) &#215; &#8730;3/&#960;<br><br>r to d: d = 2r / &#8730;(1-r&#178;)</div>
                <div class="formula-ref"><strong>Reference:</strong> Borenstein M, et al. (2021). Introduction to Meta-Analysis. Chapter 7.</div>
            </div>

            <div class="formula-section">
                <h3>Cluster RCT Design Effect</h3>
                <div class="formula-box">DEFF = 1 + (m - 1) &#215; ICC<br><br>n<sub>cluster</sub> = n<sub>individual</sub> &#215; DEFF<br><br>k = n<sub>cluster</sub> / m</div>
                <div class="formula-desc">Where: DEFF = design effect, m = cluster size, ICC = intraclass correlation coefficient</div>
                <div class="formula-ref"><strong>Reference:</strong> Hayes RJ, Moulton LH. (2017). Cluster Randomised Trials. Chapter 5.</div>
            </div>

            <div class="formula-section">
                <h3>Cohen's Kappa Sample Size</h3>
                <div class="formula-box">n = [z<sub>&#945;</sub>&#8730;(2p<sub>e</sub>(1-p<sub>e</sub>)/(1-p<sub>e</sub>)&#178;) + z<sub>&#946;</sub>&#8730;(2p<sub>o</sub>(1-p<sub>o</sub>)/(1-p<sub>e</sub>)&#178;)]&#178; / (&#954;<sub>1</sub>-&#954;<sub>0</sub>)&#178;</div>
                <div class="formula-desc">Where: &#954; = (p<sub>o</sub> - p<sub>e</sub>)/(1 - p<sub>e</sub>), p<sub>o</sub> = observed agreement</div>
                <div class="formula-ref"><strong>Reference:</strong> Sim J, Wright CC. (2005). Physical Therapy, 85(3):257-268.</div>
            </div>

            <div class="formula-section">
                <h3>ICC Sample Size</h3>
                <div class="formula-box">n = 8z&#178;(1-&#961;<sub>0</sub>)&#178;(1+(k-1)&#961;<sub>0</sub>)&#178; / [k(k-1)(&#961;<sub>1</sub>-&#961;<sub>0</sub>)&#178;]</div>
                <div class="formula-desc">Where: &#961;<sub>0</sub> = null ICC, &#961;<sub>1</sub> = alternative ICC, k = number of raters</div>
                <div class="formula-ref"><strong>Reference:</strong> Walter SD, Eliasziw M, Donner A. (1998). Statistics in Medicine, 17:101-110.</div>
            </div>

            <div class="formula-section">
                <h3>Meta-Analysis Sample Size (Random Effects)</h3>
                <div class="formula-box">k = ((z<sub>&#945;/2</sub> + z<sub>&#946;</sub>)&#178; &#215; (&#964;&#178; + &#963;&#178;/n&#772;)) / &#948;&#178;</div>
                <div class="formula-desc">Where: k = number of studies, &#964;&#178; = between-study variance, n&#772; = average sample size</div>
                <div class="formula-ref"><strong>Reference:</strong> Hedges LV, Pigott TD. (2001). Psychological Methods, 6(3):203-217.</div>
            </div>
        </div>

        <!-- Papers -->
        <div class="content-card hidden" id="papers-content">
            <h2>&#128196; Methodology Papers</h2>
            <p>Key published papers on sample size methodology organized by study design.</p>

            <h3 style="font-size: 1rem; color: var(--primary); margin: 1.5rem 0 1rem;">Clinical Trials</h3>
            <div class="ref-grid">
                <div class="ref-item" data-category="article">
                    <div class="ref-title">Sample size calculation for clinical trials: the impact of clinician beliefs</div>
                    <div class="ref-authors">Spiegelhalter DJ, Freedman LS, Parmar MK</div>
                    <div class="ref-source">Statistics in Medicine, 1994;13(17):1715-1728</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1002/sim.4780131705" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/7997710/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>

                <div class="ref-item" data-category="article">
                    <div class="ref-title">CONSORT 2010 Statement: updated guidelines for reporting parallel group randomised trials</div>
                    <div class="ref-authors">Schulz KF, Altman DG, Moher D; CONSORT Group</div>
                    <div class="ref-source">BMJ, 2010;340:c332</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1136/bmj.c332" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://www.consort-statement.org/" target="_blank" class="ref-link secondary">CONSORT</a>
                    </div>
                </div>
            </div>

            <h3 style="font-size: 1rem; color: var(--primary); margin: 1.5rem 0 1rem;">Agreement Studies</h3>
            <div class="ref-grid">
                <div class="ref-item" data-category="article">
                    <div class="ref-title">The measurement of observer agreement for categorical data</div>
                    <div class="ref-authors">Landis JR, Koch GG</div>
                    <div class="ref-source">Biometrics, 1977;33(1):159-174</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.2307/2529310" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/843571/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>

                <div class="ref-item" data-category="article">
                    <div class="ref-title">Statistical methods for assessing agreement between two methods of clinical measurement</div>
                    <div class="ref-authors">Bland JM, Altman DG</div>
                    <div class="ref-source">Lancet, 1986;1(8476):307-310</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1016/S0140-6736(86)90837-8" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/2868172/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>

                <div class="ref-item" data-category="article">
                    <div class="ref-title">A concordance correlation coefficient to evaluate reproducibility</div>
                    <div class="ref-authors">Lin LI</div>
                    <div class="ref-source">Biometrics, 1989;45(1):255-268</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.2307/2532051" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/2720055/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>
            </div>

            <h3 style="font-size: 1rem; color: var(--primary); margin: 1.5rem 0 1rem;">Cluster Randomized Trials</h3>
            <div class="ref-grid">
                <div class="ref-item" data-category="article">
                    <div class="ref-title">Sample size calculations for stepped wedge and cluster randomised trials: a unified approach</div>
                    <div class="ref-authors">Hemming K, Taljaard M</div>
                    <div class="ref-source">Journal of Clinical Epidemiology, 2016;69:137-146</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1016/j.jclinepi.2015.08.015" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/26344808/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>
            </div>

            <h3 style="font-size: 1rem; color: var(--primary); margin: 1.5rem 0 1rem;">Diagnostic Studies</h3>
            <div class="ref-grid">
                <div class="ref-item" data-category="article">
                    <div class="ref-title">Sample sizes for studies of diagnostic accuracy</div>
                    <div class="ref-authors">Flahault A, Cadilhac M, Thomas G</div>
                    <div class="ref-source">Clinical Chemistry, 2005;51(11):2123-2128</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1373/clinchem.2005.054056" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://pubmed.ncbi.nlm.nih.gov/16166139/" target="_blank" class="ref-link secondary">PubMed</a>
                    </div>
                </div>

                <div class="ref-item" data-category="article">
                    <div class="ref-title">STARD 2015: An Updated List of Essential Items for Reporting Diagnostic Accuracy Studies</div>
                    <div class="ref-authors">Bossuyt PM, Reitsma JB, Bruns DE, et al.</div>
                    <div class="ref-source">BMJ, 2015;351:h5527</div>
                    <div class="ref-links">
                        <a href="https://doi.org/10.1136/bmj.h5527" target="_blank" class="ref-link primary">DOI</a>
                        <a href="https://www.equator-network.org/reporting-guidelines/stard/" target="_blank" class="ref-link secondary">EQUATOR</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources -->
        <div class="content-card hidden" id="resources-content">
            <h2>&#127760; Online Resources</h2>
            <p>Useful online tools, calculators, and documentation for validation and reference.</p>

            <h4 class="resources-section-title">Sample Size Calculators</h4>
            <div class="resources-grid">
                <div class="resource-card">
                    <h4>G*Power</h4>
                    <p>Comprehensive power analysis software for various statistical tests. Free download.</p>
                    <a href="https://www.psychologie.hhu.de/arbeitsgruppen/allgemeine-psychologie-und-arbeitspsychologie/gpower" target="_blank">www.gpower.hhu.de &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>PS: Power and Sample Size</h4>
                    <p>Free software for power and sample size calculations from Vanderbilt University.</p>
                    <a href="https://biostat.app.vumc.org/wiki/Main/PowerSampleSize" target="_blank">biostat.app.vumc.org &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>Sealed Envelope</h4>
                    <p>Online sample size calculators for clinical trials with clear explanations.</p>
                    <a href="https://www.sealedenvelope.com/power/" target="_blank">www.sealedenvelope.com &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>ClinCalc</h4>
                    <p>Clinical calculators including sample size for comparison of means and proportions.</p>
                    <a href="https://clincalc.com/stats/samplesize.aspx" target="_blank">clincalc.com &#8599;</a>
                </div>
            </div>

            <h4 class="resources-section-title">Reporting Guidelines</h4>
            <div class="resources-grid">
                <div class="resource-card">
                    <h4>EQUATOR Network</h4>
                    <p>Comprehensive library of reporting guidelines for health research studies.</p>
                    <a href="https://www.equator-network.org/" target="_blank">www.equator-network.org &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>CONSORT Statement</h4>
                    <p>Official CONSORT website with checklist, flow diagram, and extensions.</p>
                    <a href="https://www.consort-statement.org/" target="_blank">www.consort-statement.org &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>STROBE Statement</h4>
                    <p>Reporting guidelines for observational studies in epidemiology.</p>
                    <a href="https://www.strobe-statement.org/" target="_blank">www.strobe-statement.org &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>PRISMA Statement</h4>
                    <p>Guidelines for reporting systematic reviews and meta-analyses.</p>
                    <a href="https://www.prisma-statement.org/" target="_blank">www.prisma-statement.org &#8599;</a>
                </div>
            </div>

            <h4 class="resources-section-title">Statistical Software</h4>
            <div class="resources-grid">
                <div class="resource-card">
                    <h4>R Documentation</h4>
                    <p>Official R documentation and CRAN package repository.</p>
                    <a href="https://cran.r-project.org/" target="_blank">cran.r-project.org &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>Stata Power Documentation</h4>
                    <p>Stata's comprehensive power and sample size documentation.</p>
                    <a href="https://www.stata.com/features/power-and-sample-size/" target="_blank">www.stata.com &#8599;</a>
                </div>
                <div class="resource-card">
                    <h4>pwr Package (R)</h4>
                    <p>R package for basic power analysis functions based on Cohen (1988).</p>
                    <a href="https://cran.r-project.org/package=pwr" target="_blank">CRAN: pwr &#8599;</a>
                </div>
            </div>
        </div>

        <!-- Glossary -->
        <div class="content-card hidden" id="glossary-content">
            <h2>&#128209; Statistical Glossary</h2>
            <p>Definitions of key statistical terms used in sample size calculations.</p>

            <div class="alphabet-nav" id="alphabetNav"></div>

            <div class="glossary-grid" id="glossaryGrid">
                <div class="glossary-item" data-letter="A">
                    <div class="glossary-term">Alpha (&#945;)</div>
                    <div class="glossary-def">The probability of rejecting the null hypothesis when it is true (Type I error). Commonly set at 0.05.</div>
                </div>
                <div class="glossary-item" data-letter="A">
                    <div class="glossary-term">Allocation Ratio</div>
                    <div class="glossary-def">The ratio of participants assigned to treatment vs control groups (e.g., 1:1, 2:1).</div>
                </div>
                <div class="glossary-item" data-letter="B">
                    <div class="glossary-term">Beta (&#946;)</div>
                    <div class="glossary-def">The probability of failing to reject the null hypothesis when it is false (Type II error). Power = 1 - &#946;.</div>
                </div>
                <div class="glossary-item" data-letter="B">
                    <div class="glossary-term">Bland-Altman Plot</div>
                    <div class="glossary-def">A graphical method to compare two measurement techniques by plotting differences against means.</div>
                </div>
                <div class="glossary-item" data-letter="C">
                    <div class="glossary-term">Cohen's d</div>
                    <div class="glossary-def">A standardized effect size measure: the difference between means divided by pooled standard deviation.</div>
                </div>
                <div class="glossary-item" data-letter="C">
                    <div class="glossary-term">Cluster Randomization</div>
                    <div class="glossary-def">Randomization of groups (clusters) rather than individuals, common in community or school-based trials.</div>
                </div>
                <div class="glossary-item" data-letter="C">
                    <div class="glossary-term">Confidence Interval</div>
                    <div class="glossary-def">A range of values that is likely to contain the true population parameter with a specified level of confidence.</div>
                </div>
                <div class="glossary-item" data-letter="D">
                    <div class="glossary-term">Design Effect (DEFF)</div>
                    <div class="glossary-def">The ratio of actual sample size needed to the sample size that would be needed with simple random sampling.</div>
                </div>
                <div class="glossary-item" data-letter="E">
                    <div class="glossary-term">Effect Size</div>
                    <div class="glossary-def">A quantitative measure of the magnitude of a phenomenon, independent of sample size.</div>
                </div>
                <div class="glossary-item" data-letter="E">
                    <div class="glossary-term">Eta-squared (&#951;&#178;)</div>
                    <div class="glossary-def">The proportion of variance in the dependent variable attributable to an independent variable.</div>
                </div>
                <div class="glossary-item" data-letter="H">
                    <div class="glossary-term">Hedges' g</div>
                    <div class="glossary-def">A bias-corrected version of Cohen's d, preferred for small sample sizes.</div>
                </div>
                <div class="glossary-item" data-letter="H">
                    <div class="glossary-term">Heterogeneity</div>
                    <div class="glossary-def">Variability in study outcomes beyond what would be expected from sampling error alone.</div>
                </div>
                <div class="glossary-item" data-letter="I">
                    <div class="glossary-term">ICC (Intraclass Correlation)</div>
                    <div class="glossary-def">A measure of reliability or agreement for quantitative measurements, accounting for systematic differences.</div>
                </div>
                <div class="glossary-item" data-letter="I">
                    <div class="glossary-term">I&#178; Statistic</div>
                    <div class="glossary-def">A measure of heterogeneity in meta-analysis, representing the percentage of variability due to true differences.</div>
                </div>
                <div class="glossary-item" data-letter="K">
                    <div class="glossary-term">Kappa (&#954;)</div>
                    <div class="glossary-def">Cohen's kappa - a measure of inter-rater agreement for categorical variables, corrected for chance agreement.</div>
                </div>
                <div class="glossary-item" data-letter="M">
                    <div class="glossary-term">MCID</div>
                    <div class="glossary-def">Minimal Clinically Important Difference - the smallest change in outcome that patients perceive as meaningful.</div>
                </div>
                <div class="glossary-item" data-letter="N">
                    <div class="glossary-term">Non-Inferiority Margin</div>
                    <div class="glossary-def">The largest difference that would still be clinically acceptable in a non-inferiority trial.</div>
                </div>
                <div class="glossary-item" data-letter="O">
                    <div class="glossary-term">Odds Ratio (OR)</div>
                    <div class="glossary-def">The ratio of odds of an event in the treatment group to odds in the control group.</div>
                </div>
                <div class="glossary-item" data-letter="P">
                    <div class="glossary-term">Power</div>
                    <div class="glossary-def">The probability of correctly rejecting the null hypothesis when it is false. Typically set at 80% or 90%.</div>
                </div>
                <div class="glossary-item" data-letter="R">
                    <div class="glossary-term">Risk Ratio (RR)</div>
                    <div class="glossary-def">The ratio of the probability of an event in the treatment group to the probability in the control group.</div>
                </div>
                <div class="glossary-item" data-letter="R">
                    <div class="glossary-term">ROC Curve</div>
                    <div class="glossary-def">Receiver Operating Characteristic curve - plots sensitivity vs (1-specificity) for diagnostic tests.</div>
                </div>
                <div class="glossary-item" data-letter="S">
                    <div class="glossary-term">Sensitivity</div>
                    <div class="glossary-def">The proportion of true positives correctly identified by a diagnostic test (true positive rate).</div>
                </div>
                <div class="glossary-item" data-letter="S">
                    <div class="glossary-term">Specificity</div>
                    <div class="glossary-def">The proportion of true negatives correctly identified by a diagnostic test (true negative rate).</div>
                </div>
                <div class="glossary-item" data-letter="T">
                    <div class="glossary-term">Tau-squared (&#964;&#178;)</div>
                    <div class="glossary-def">The between-study variance in a random effects meta-analysis.</div>
                </div>
                <div class="glossary-item" data-letter="T">
                    <div class="glossary-term">Type I Error</div>
                    <div class="glossary-def">Rejecting the null hypothesis when it is actually true (false positive).</div>
                </div>
                <div class="glossary-item" data-letter="T">
                    <div class="glossary-term">Type II Error</div>
                    <div class="glossary-def">Failing to reject the null hypothesis when it is actually false (false negative).</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-brand">
                <div class="footer-logo">K</div>
                <span class="footer-name">Crafted by Karmayogi</span>
            </div>
            <div class="footer-blessing">&#128591; Jai Shri Ram &#128591;</div>
        </footer>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">&#127769;</button>

    <script>
        // ============================================
        // KARMASTAT LOADER SYSTEM
        // ============================================

        // Page Loader - Hide after page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const pageLoader = document.getElementById('pageLoader');
                if (pageLoader) {
                    pageLoader.classList.add('hidden');
                }
            }, 800);
        });

        // Button Loader Functions
        function showButtonLoader(btn) {
            if (btn) {
                btn.classList.add('loading');
            }
        }

        function hideButtonLoader(btn) {
            if (btn) {
                btn.classList.remove('loading');
            }
        }

        // Wrapper function for calculations with loader
        function withLoader(btn, calculationFn) {
            showButtonLoader(btn);
            // Small delay to show loader, then run calculation
            setTimeout(function() {
                try {
                    calculationFn();
                } catch (error) {
                    console.error('Calculation error:', error);
                } finally {
                    hideButtonLoader(btn);
                }
            }, 300);
        }

        // ============================================
        // END KARMASTAT LOADER SYSTEM
        // ============================================

        // Theme
        function initTheme() {
            const saved = localStorage.getItem('karmastat-theme');
            if (saved === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').innerHTML = '&#9728;';
            }
        }

        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.getAttribute('data-theme') === 'dark';

            if (isDark) {
                html.removeAttribute('data-theme');
                document.querySelector('.theme-toggle').innerHTML = '&#127769;';
                localStorage.setItem('karmastat-theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').innerHTML = '&#9728;';
                localStorage.setItem('karmastat-theme', 'dark');
            }
        }

        // Tabs
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');

            document.querySelectorAll('.content-card').forEach(c => c.classList.add('hidden'));
            document.getElementById(tabId + '-content').classList.remove('hidden');
        }

        // Search
        let searchTimeout;
        function searchContent(term) {
            term = term.toLowerCase().trim();

            const status = document.getElementById('searchStatus');

            if (!term) {
                resetSearch();
                status.classList.add('hidden');
                return;
            }

            const tabMatches = { textbooks: 0, formulas: 0, papers: 0, resources: 0, glossary: 0 };

            // Search textbooks
            document.querySelectorAll('#textbooks-content .ref-item').forEach(item => {
                const match = item.textContent.toLowerCase().includes(term);
                item.style.display = match ? '' : 'none';
                if (match) tabMatches.textbooks++;
            });

            // Search papers
            document.querySelectorAll('#papers-content .ref-item').forEach(item => {
                const match = item.textContent.toLowerCase().includes(term);
                item.style.display = match ? '' : 'none';
                if (match) tabMatches.papers++;
            });

            // Search formulas
            document.querySelectorAll('.formula-section').forEach(item => {
                const match = item.textContent.toLowerCase().includes(term);
                item.style.display = match ? '' : 'none';
                if (match) tabMatches.formulas++;
            });

            // Search glossary
            document.querySelectorAll('.glossary-item').forEach(item => {
                const match = item.textContent.toLowerCase().includes(term);
                item.style.display = match ? '' : 'none';
                if (match) tabMatches.glossary++;
            });

            // Search resources
            document.querySelectorAll('.resource-card').forEach(item => {
                const match = item.textContent.toLowerCase().includes(term);
                item.style.display = match ? '' : 'none';
                if (match) tabMatches.resources++;
            });

            // Update tab badges
            document.querySelectorAll('.tab').forEach(tab => {
                const existing = tab.querySelector('.tab-badge');
                if (existing) existing.remove();

                const count = tabMatches[tab.dataset.tab] || 0;
                if (count > 0) {
                    const badge = document.createElement('span');
                    badge.className = 'tab-badge';
                    badge.textContent = count;
                    tab.appendChild(badge);
                }
            });

            // Show status
            const total = Object.values(tabMatches).reduce((a, b) => a + b, 0);
            status.classList.remove('hidden');
            status.innerHTML = total > 0
                ? `<span>Found <strong>${total}</strong> results for "<strong>${term}</strong>"</span><button class="clear-btn" onclick="clearSearch()">Clear</button>`
                : `<span>No results for "<strong>${term}</strong>"</span><button class="clear-btn" onclick="clearSearch()">Clear</button>`;

            // Auto-switch tab if needed
            const currentTab = document.querySelector('.tab.active').dataset.tab;
            if (tabMatches[currentTab] === 0) {
                for (const [tabId, count] of Object.entries(tabMatches)) {
                    if (count > 0) {
                        switchTab(tabId);
                        break;
                    }
                }
            }
        }

        function resetSearch() {
            document.querySelectorAll('.ref-item, .formula-section, .glossary-item, .resource-card').forEach(item => {
                item.style.display = '';
            });
            document.querySelectorAll('.tab-badge').forEach(b => b.remove());
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchStatus').classList.add('hidden');
            resetSearch();
        }

        // Filter buttons
        function filterByCategory(category) {
            document.querySelectorAll('.ref-item').forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Alphabet nav
        function generateAlphabetNav() {
            const nav = document.getElementById('alphabetNav');
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            const usedLetters = new Set();

            document.querySelectorAll('.glossary-item').forEach(item => {
                usedLetters.add(item.dataset.letter);
            });

            const allBtn = document.createElement('button');
            allBtn.className = 'alphabet-btn active';
            allBtn.textContent = 'All';
            allBtn.onclick = function() {
                document.querySelectorAll('.alphabet-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.querySelectorAll('.glossary-item').forEach(i => i.style.display = '');
            };
            nav.appendChild(allBtn);

            letters.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'alphabet-btn';
                btn.textContent = letter;
                btn.disabled = !usedLetters.has(letter);

                if (usedLetters.has(letter)) {
                    btn.onclick = function() {
                        document.querySelectorAll('.alphabet-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        document.querySelectorAll('.glossary-item').forEach(item => {
                            item.style.display = item.dataset.letter === letter ? '' : 'none';
                        });
                    };
                }
                nav.appendChild(btn);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            generateAlphabetNav();

            // Tab clicks
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });

            // Filter clicks
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterByCategory(this.dataset.category);
                });
            });

            // Search input
            document.getElementById('searchInput').addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => searchContent(this.value), 200);
            });

            document.getElementById('searchInput').addEventListener('keydown', function(e) {
                if (e.key === 'Escape') clearSearch();
            });
        });
    </script>
</body>
</html>
